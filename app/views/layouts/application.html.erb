<!DOCTYPE html>
<html>
<head>
  <title>Web App</title>
  <%= stylesheet_link_tag "web-app-theme/base", "web-app-theme/themes/default/style", "web-app-theme/override", :cache => true %>
  <%= javascript_include_tag :defaults, :cache => true %>
  <script src="/javascripts/jquery.tmpl.js" type="text/javascript"></script>
  <%= csrf_meta_tag %>
  <script src="http://js.pusherapp.com/1.8/pusher.min.js" type="text/javascript"></script>


  <script id="submitted_answer_template" type="text/html">
    <%= render :partial => 'questions/submitted_answer_js', :locals => {:submitted_answer => SubmittedAnswer.fake} %>
  </script>
  <script type="text/javascript">
    var pusher = new Pusher('7c30243799aa373f964c');
    var channel = pusher.subscribe('foo');
    channel.bind('foo-create', function(submitted_answer) {
      var html = $('#submitted_answer_template').tmpl(submitted_answer);
      $('#submitted_answers_table').append(html);
    });
  </script>


</head>
<body>
  <div id="container">
    <div id="header">
      <h1><a href="/">Web App</a></h1>
      <div id="user-navigation">
        <ul class="wat-cf">
          <li><a href="#"><%= t("web-app-theme.profile", :default => "Profile") %></a></li>
          <li><a href="#"><%= t("web-app-theme.settings", :default => "Settings") %></a></li>
          <li><a href="/logout" class="logout"><%= t("web-app-theme.logout", :default => "Logout") %></a></li>
        </ul>
      </div>
      <div id="main-navigation">
        <ul class="wat-cf"></ul>
      </div>
    </div>    
    <div id="wrapper" class="wat-cf">
      <div class="flash">
        <% flash.each do |type, message| -%>
          <div class="message <%= type %>">
            <p><%= message %></p>
          </div>
        <% end -%>
      </div>
      <div id="main">
        <%= yield %>
        <div id="footer">
          <div class="block">
            <p>Copyright &copy; <%= Time.now.year %> Web App.</p>
          </div>      
        </div>
      </div>
      <div id="sidebar">
        <%= yield :sidebar %>
      </div>
    </div>    
  </div>
</body>
</html>
